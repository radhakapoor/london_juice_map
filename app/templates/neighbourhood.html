{% extends "base.html" %}
{% block content %}
  
      
         
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDiYbxd3duyyAZx9qj6HRqKqyRrycF-uho">
    </script>
    <script type="text/javascript">
      juicebars = {{juicebars|safe}};
    </script>
    <script type="text/javascript">
      neighbourhoods = {{neighbourhoods|safe}};
    </script>    

    <script type="text/javascript">
      
        function createMarkerClickListener(map, marker, juicebarName, juicebarAddress, juicebarSite, juicebarPhone) {
          return function() {
          var contentString = '<div id="content">'+
          '<div id="siteNotice">'+
          '</div>'+
          '<h3 id="firstHeading" class="firstHeading">' + juicebarName+'</h3>'+
          '<div id="bodyContent">'+
          '<p>'+juicebarAddress +      
          '<p><a href='+juicebarSite+'>'+
          juicebarSite+'</a></p>'+
          juicebarPhone+ '</p>'+
          '</div>'+
          '</div>';

          var infoWindow = new google.maps.InfoWindow({
            content: contentString
        });
          infoWindow.open(map, marker);
      };

  }

  function initialize() {
        var myLatlng = new google.maps.LatLng( {{lat}}, {{lng}});
        var mapOptions = {          
          zoom: {{zoom}},
          center: myLatlng
        }
        var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);

        for (var i = 0; i < juicebars.length; i++) {

          var marker = new google.maps.Marker({
            icon: ('http://maps.google.com/mapfiles/ms/icons/green-dot.png'),
            position: new google.maps.LatLng(juicebars[i][1], juicebars[i][2]),
            map: map, 
            title: juicebars[i][0],                         
          });

        google.maps.event.addListener(marker, 'click', createMarkerClickListener(map, marker, juicebars[i][0], juicebars[i][3], juicebars[i][4], juicebars[i][5]));     
      }
      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
          ga('create', 'UA-53356701-1', 'auto');
          ga('send', 'pageview');
  </script>
  </head>  
  
      <div class="col-md-4">
      <h2 id="neighbourhood_name">{{neighbourhood_name}} </h2>  
  
  {% for bar in neighbourhood_bars %}
  <!--{{ bar }}-->
  <a href="{{ url_for ('juicebar', id=bar, name=by_name[bar]['name']) }}">{{ by_name[bar]['name'] }}</a>
  <br>
  {{ by_name[bar]['address'] }}
  <br>
  {{ by_name[bar]['phone_number'] }}
  <br>  
  {% endfor %}
      </div>      
        <div id="map-canvas"/> 
           
{% endblock %}

  